# Data

## csv files

### PHICS_transmission_data.csv

Raw viral load data for each household (long format) by time, Family ID, and virus (CMV, EBV, HHV-6, HHV-8, HSV).


### exposure_data.csv

Generated by `setup-exposure-data.Rmd`. Processed exposure data for sibling, mother, and household combined. Complete case contains only infants with observed exposures from all sources. Missing weeks have had viral loads interpolated.

|**Variable name** | **Description** | **Type** | **Categories/Units/Notes** |
|------------------|-----------------|------------------|-----------------|
|**FamilyID** | Family ID | chr | |
|**virus** | Virus ID | chr | CMV, HHV-6|
|**infant_wks** | weeks post infant infection | num | |
|**infectious_1wk** | infant infection observed following this week | bool | |
|**final_infant_wk** | final infant observation week | num | |
|**infected** | infant infection study status| bool | |
|**momhiv** | hiv status of mom in household | chr | "neg" "pos" |
|**final_exposure** | final exposure observation | bool | |
|**interpolate_idpar** | which exposure interpolated | chr | "M" "S", NA or "" = no interpolation|
|**M** | maternal log10 viral load| num | log10 DNA copies/swab|
|**S** | aggregated secondary children log10 viral load | num |log10 DNA copies/swab |
|**HH** | household sum log10 viral load | num |log10 DNA copies/swab |
|**obs_infected** | infant infection during 1st year| bool | |
|**final_wk** | final exposure observation week | num | |
|**outcome_time** | final observation status week | num | final_wk + 1|
|**enrollment_age** | infant age at enrollment (days) | num | |


### exposure_data_long.csv

Generated by `setup-exposure-data.Rmd`. Processed exposure data for sibling, mother, and household combined in long format. 

|**Variable name** | **Description** | **Type** | **Categories/Units/Notes** |
|------------------|-----------------|------------------|-----------------|
|**FamilyID** | Family ID | chr | |
|**virus** | Virus ID | chr | CMV, HHV-6|
|**infant_wks** | weeks post infant infection | num | |
|**infectious_1wk** | infant infection observed following this week | bool | |
|**final_infant_wk** | final infant observation week | num | |
|**infected** | infant infection study status| bool | |
|**momhiv** | hiv status of mom in household | chr | "neg" "pos" |
|**final_exposure** | final exposure observation | bool | |
|**interpolate_idpar** | which exposure interpolated at that week | chr | "M" "S", NA or "" = no interpolation|
|**obs_infected** | infant infection during 1st year| bool | |
|**final_wk** | final exposure observation week | num | |
|**outcome_time** | final observation status week | num | final_wk + 1|
|**enrollment_age** | infant age at enrollment (days) | num | |
|**idpar** | household exposure group | chr | "M" "S" "HH"|
|**count** | log10 viral concentration | num | log10 DNA copies/mL|
|**interpolated** | was this row interpolated?| bool | |


exposure_data_long.csv is the long version of exposure_data.csv. To maintain interpolation information in the long format, the transformation wasn't straightforward to me and required an extra step. The code snippet to perform this transformation was (from the `setup-exposure-data.Rmd`):
```
tmp_chr = "-"
exposure_data_long = exposure_data %>%
  gather(idpar, count, S, M, HH) %>%
  mutate(
    interpolate_idpar_tmp = if_else(interpolate_idpar == "", tmp_chr, interpolate_idpar),
    interpolated = if_else(interpolate_idpar != "" & idpar == "HH", T,
                           str_detect(interpolate_idpar_tmp, idpar))
  ) %>%
  select(-interpolate_idpar_tmp)
```


## R Data files

- PHICS_transmission_data.Rdata: equivalent to PHICS_transmission_data.csv. Loads `virusMeltedDataDemoAllInfant` into environment.

- exposure_data.Rdata: Generated by `setup-exposure-data.Rmd`. Loads both `exposure_data` and `exposure_data_long` into environment, matching respective csv descriptions above.

